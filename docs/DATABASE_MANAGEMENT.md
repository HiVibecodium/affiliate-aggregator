# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö - –ö—Ä–∞—Ç–∫–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

## üéØ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

**1. –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —á—Ç–æ –±—É–¥–µ—Ç (–±–µ–∑–æ–ø–∞—Å–Ω–æ):**

```bash
npm run db:optimize
```

**2. –í—ã–ø–æ–ª–Ω–∏—Ç—å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é:**

```bash
npm run db:optimize:execute
```

### –ë—ç–∫–∞–ø –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ

**–°–æ–∑–¥–∞—Ç—å –±—ç–∫–∞–ø:**

```bash
npm run db:backup
```

**–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ –±—ç–∫–∞–ø–∞:**

```bash
npm run db:restore <–∏–º—è-—Ñ–∞–π–ª–∞.json>
```

### –ò–º–ø–æ—Ä—Ç –ø—Ä–æ–≥—Ä–∞–º–º

**–°–æ–∑–¥–∞—Ç—å –ø—Ä–∏–º–µ—Ä —Ñ–∞–π–ª–∞:**

```bash
npm run db:import:example
```

**–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—ã:**

```bash
npm run db:import scripts/example-batch.json
```

---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ—Å–ª–µ–¥–Ω–µ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

**–î–∞—Ç–∞:** 19 –Ω–æ—è–±—Ä—è 2025, 16:38

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**

- –ë—ã–ª–æ –ø—Ä–æ–≥—Ä–∞–º–º: **80,010**
- –û—Å—Ç–∞–ª–æ—Å—å –ø—Ä–æ–≥—Ä–∞–º–º: **742**
- –£–¥–∞–ª–µ–Ω–æ: **79,268** (99.1%)

**–ö–∞—á–µ—Å—Ç–≤–æ:**

- –°—Ä–µ–¥–Ω—è—è –∫–æ–º–∏—Å—Å–∏—è: **42.28%** (–±—ã–ª–æ ~22%)
- –°—Ä–µ–¥–Ω—è—è –¥–ª–∏–Ω–∞ cookie: **76 –¥–Ω–µ–π**
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –∫–æ–º–∏—Å—Å–∏—è: **75%**

**–ö–∞—Ç–µ–≥–æ—Ä–∏–∏:**

- –í—Å–µ–≥–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–π: **76**
- –ú–∏–Ω–∏–º—É–º –≤ –∫–∞–∂–¥–æ–π: **10 –ø—Ä–æ–≥—Ä–∞–º–º**
- ‚úÖ –§–∏–ª—å—Ç—Ä—ã –≤—Å–µ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

**–ë—ç–∫–∞–ø:**

```
backups/db-backup-before-optimization-2025-11-19T16-38-26.json
```

---

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫—Ä–∏—Ç–µ—Ä–∏–µ–≤

–§–∞–π–ª: `scripts/optimize-database.ts`

```typescript
const QUALITY_CRITERIA = {
  minCommissionRate: 15,        // –ú–∏–Ω–∏–º—É–º 15% –∫–æ–º–∏—Å—Å–∏—è
  minCookieDuration: 30,        // –ú–∏–Ω–∏–º—É–º 30 –¥–Ω–µ–π cookie
  maxPrograms: 700,             // –ú–∞–∫—Å–∏–º—É–º –ø—Ä–æ–≥—Ä–∞–º–º
  minProgramsPerCategory: 10,   // –ú–∏–Ω–∏–º—É–º –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
  topNetworks: [...],           // –¢–æ–ø–æ–≤—ã–µ —Å–µ—Ç–∏
  topCategories: [...],         // –¢–æ–ø–æ–≤—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
};
```

---

## üìù –í—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

| –ö–æ–º–∞–Ω–¥–∞                       | –û–ø–∏—Å–∞–Ω–∏–µ                |
| ----------------------------- | ----------------------- |
| `npm run db:optimize`         | –ê–Ω–∞–ª–∏–∑ (dry-run)        |
| `npm run db:optimize:execute` | –í—ã–ø–æ–ª–Ω–∏—Ç—å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é   |
| `npm run db:backup`           | –°–æ–∑–¥–∞—Ç—å –±—ç–∫–∞–ø           |
| `npm run db:restore <file>`   | –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ –±—ç–∫–∞–ø–∞  |
| `npm run db:import <file>`    | –ò–º–ø–æ—Ä—Ç –ø—Ä–æ–≥—Ä–∞–º–º –∏–∑ JSON |
| `npm run db:import:example`   | –°–æ–∑–¥–∞—Ç—å –ø—Ä–∏–º–µ—Ä —Ñ–∞–π–ª–∞    |
| `npm run db:migrate`          | –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏      |
| `npm run db:push`             | –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å—Ö–µ–º—É  |
| `npm run db:studio`           | –û—Ç–∫—Ä—ã—Ç—å Prisma Studio   |

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–í—Å–µ–≥–¥–∞ –¥–µ–ª–∞–π—Ç–µ –±—ç–∫–∞–ø** –ø–µ—Ä–µ–¥ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π
2. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –Ω–µ–æ–±—Ä–∞—Ç–∏–º–∞** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±—ç–∫–∞–ø –¥–ª—è –æ—Ç–∫–∞—Ç–∞
3. **–ò–º–ø–æ—Ä—Ç –±–µ–∑–æ–ø–∞—Å–µ–Ω** - –¥—É–±–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–ø—É—Å–∫–∞—é—Ç—Å—è
4. **–ë—ç–∫–∞–ø—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON** - –º–æ–∂–Ω–æ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å

---

## üìñ –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [QUICK_START_DB.md](../QUICK_START_DB.md) - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- [DATABASE_OPTIMIZATION.md](DATABASE_OPTIMIZATION.md) - –¥–µ—Ç–∞–ª—å–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

---

## üÜò –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å –≤—Å—ë –Ω–∞–∑–∞–¥:

```bash
npm run db:restore db-backup-before-optimization-2025-11-19T16-38-26.json
```

–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–π–º—ë—Ç 5-10 –º–∏–Ω—É—Ç –∏ –≤–µ—Ä–Ω—ë—Ç –≤—Å–µ 80,010 –ø—Ä–æ–≥—Ä–∞–º–º.
